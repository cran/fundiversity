<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>1. Overview of how to use fundiversity</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">

div.csl-bib-body { }
div.csl-entry {
clear: both;
}
.hanging div.csl-entry {
margin-left:2em;
text-indent:-2em;
}
div.csl-left-margin {
min-width:2em;
float:left;
}
div.csl-right-inline {
margin-left:2em;
padding-left:1em;
}
div.csl-indent {
margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">1. Overview of how to use fundiversity</h1>



<p><code>fundiversity</code> lets you compute functional diversity
indices. Currently it can compute five indices:</p>
<ul>
<li>functional richness (FRic),</li>
<li>functional volume intersections (FRic_intersect),</li>
<li>functional divergence (FDiv),</li>
<li>functional evenness (FEve),</li>
<li>functional dispersion (FDis)</li>
<li>Rao’s quadratic entropy (Q).</li>
</ul>
<p>This vignette will introduce you to the data needed as well as how to
compute and interpret each index. We made sure the computations of these
indices are correct based on a test dataset as specified in the <a href="./fundiversity_3-correctness.html">correctness vignette</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;fundiversity&quot;</span>)</span></code></pre></div>
<div id="required-data" class="section level1">
<h1>Required data</h1>
<p>To compute functional diversity indices, you will need at least a
dataset describing species traits, i.e. species characteristics. Note
that we here talk about species but the reasoning could apply on
whatever unit you’re interested in whether it’s individual organisms,
ecological plots, or even entire ecosystems. The traits are the features
that describe these units.</p>
<p><code>fundiversity</code> comes with one example trait dataset. The
dataset comes from <span class="citation">Nowak et al. (<a href="#ref-Nowak_Projecting_2019" role="doc-biblioref">2019b</a>)</span>
and describe the traits of birds and plants along a tropical gradient
<span class="citation">(<a href="#ref-Nowak_Data_2019" role="doc-biblioref">Nowak et al. 2019a</a>)</span>. You can see the
datasets available in <code>fundiversity</code> using the
<code>data()</code> function:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">&quot;fundiversity&quot;</span>)</span></code></pre></div>
<p>To load them use their names into the <code>data()</code>
function:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;traits_birds&quot;</span>, <span class="at">package =</span> <span class="st">&quot;fundiversity&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(traits_birds)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                      Bill.width..mm. Bill.length..mm. Kipp.s.index Bodymass..g.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Aburria_aburri                 18.35            35.48         0.18       1407.5</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Amazona_farinosa               26.50            38.81         0.29        626.0</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Amazona_mercenaria             17.51            26.30         0.33        340.0</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Amazona_ochrocephala           20.17            31.40         0.26        440.0</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ampelioides_tschudii           16.53            24.58         0.24         78.4</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Ampelion_rufaxilla             16.97            21.89         0.28         73.9</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;traits_plants&quot;</span>, <span class="at">package =</span> <span class="st">&quot;fundiversity&quot;</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(traits_plants)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        Fruit.length..mm. Fruit.width..mm. Plant.height..m.</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abuta_grandifolia                  17.48             9.38             6.00</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Alchornea_latifolia                 6.82             8.23            11.53</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Alchornea_triplinervia              8.18            10.26            14.72</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Allophylus_punctatus               13.58            12.49             4.40</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Alnus_acuminata                    19.32            11.48            17.54</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Aniba_guianensis                   15.65            13.43             8.00</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        Crop.mass..g.</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Abuta_grandifolia             341.25</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Alchornea_latifolia          1290.48</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Alchornea_triplinervia       1156.67</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Allophylus_punctatus           33.34</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Alnus_acuminata              5009.33</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Aniba_guianensis               25.50</span></span></code></pre></div>
<p>Note that in these datasets the <strong>species</strong> are shown in
<strong>rows</strong>, with species names as row names, and
<strong>traits</strong> are in <strong>columns</strong>.</p>
<p>Functional diversity indices are generally computed at different
locations that we hereafter call sites. We thus need a description of
which species is in which site in the form of a site-species matrix.
Again, we’re calling it a site-species matrix but the granularity of
both your “species” and “site” units can vary depending on what you want
to compute functional diversity on.</p>
<p><code>fundiversity</code> contains the corresponding site-species
matrices to the above-mentioned trait dataset <span class="citation">(<a href="#ref-Nowak_Data_2019" role="doc-biblioref">Nowak et al.
2019a</a>)</span>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Site-species matrix for birds</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;site_sp_birds&quot;</span>, <span class="at">package =</span> <span class="st">&quot;fundiversity&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(site_sp_birds)[, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           Aburria_aburri Amazona_farinosa Amazona_mercenaria</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_250               0                1                  0</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_500               0                1                  0</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1000              1                1                  1</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1500              1                0                  1</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2000              0                0                  1</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2500              0                0                  1</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           Amazona_ochrocephala Ampelioides_tschudii</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_250                     1                    0</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_500                     1                    0</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1000                    0                    1</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1500                    0                    0</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2000                    0                    0</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2500                    0                    0</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Site-species matrix for plants</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;site_sp_plants&quot;</span>, <span class="at">package =</span> <span class="st">&quot;fundiversity&quot;</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(site_sp_plants)[, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           Abuta_grandifolia Alchornea_latifolia Alchornea_triplinervia</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_250                  1                   1                      1</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_500                  1                   1                      1</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1000                 0                   0                      1</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1500                 0                   0                      1</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2000                 0                   0                      1</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2500                 0                   0                      1</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           Allophylus_punctatus Alnus_acuminata</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_250                     1               1</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_500                     1               1</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1000                    1               1</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_1500                    1               1</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2000                    1               1</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; elev_2500                    1               1</span></span></code></pre></div>
<p>The site species matrix represent the presence of a given
<strong>species</strong> (in <strong>column</strong>) in a given
<strong>site</strong> (in <strong>row</strong>), similar to the format
used in the <a href="https://cran.r-project.org/package=vegan"><code>vegan</code></a>
package. Here the site-species matrix contains only 0 (absence) and 1
(presence), but <code>fundiversity</code> can also use matrices that
contain abundances for some functional diversity indices (FDiv and
Q).</p>
<p>To ensure the good computation of functional diversity indices, at
least some of species names (row names) in the trait data need to be in
to the column names of the site species matrix:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fewer species in trait dataset than species in the site-species matrix</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds[<span class="dv">2</span><span class="sc">:</span><span class="dv">217</span>,], site_sp_birds)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Differing number of species between trait dataset and site-species matrix</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Taking subset of species</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site       FRic</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 171543.730</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 185612.548</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 109615.330</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500  63992.817</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000  20065.764</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500  18301.176</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000  17530.651</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500   3708.735</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fewer species in the site-species matrix than in the traits</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds, site_sp_birds[, <span class="dv">1</span><span class="sc">:</span><span class="dv">60</span>])</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Differing number of species between trait dataset and site-species matrix</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Taking subset of species</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site        FRic</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 18963.31311</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 18963.31311</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 38586.75398</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 38114.26828</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000  5888.93690</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500  5256.70628</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000  2710.81803</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500    88.11684</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co"># No species in common between both dataset</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,], site_sp_birds[, <span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: No species in common found between trait dataset and site-species matrix</span></span></code></pre></div>
</div>
<div id="functional-richness-fric---fd_fric" class="section level1">
<h1>Functional Richness (FRic) - <code>fd_fric()</code></h1>
<p>Functional Richness (FRic) represents the total amount of functional
space filed by a community in a dataset <span class="citation">(<a href="#ref-Villeger_New_2008" role="doc-biblioref">Villéger, Mason, and
Mouillot 2008</a>)</span>. You can compute FRic in
<code>fundiversity</code> using the <code>fd_fric()</code> function.</p>
<p>For a single trait range FRic is the range of trait observed in the
dataset:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Range of bill width in the birds dataset</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span>(<span class="fu">range</span>(traits_birds[, <span class="st">&quot;Bill.width..mm.&quot;</span>]))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 33.64</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Using fundiversity::fd_fric()</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site     FRic</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 230967.7</span></span></code></pre></div>
<p>The first column <code>site</code> describes the site on which FRic
has been computed while the <code>FRic</code> column contains the
computed FRic values. If no site-species matrix has been provided the
site is named by default <code>s1</code>.</p>
<p>For multiple traits, FRic can be thought as a multi-dimensional range
which is computed as the convex hull volume of the considered species
<span class="citation">(<a href="#ref-Villeger_New_2008" role="doc-biblioref">Villéger, Mason, and Mouillot 2008</a>)</span>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site     FRic</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 230967.7</span></span></code></pre></div>
<p>If you provide only a trait dataset without specifying site-species
matrix <code>fd_fric()</code> computes FRic on the full trait dataset.
You can compute FRic values for different sites by providing both a
trait dataset and a site-species matrix to <code>fd_fric()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds, site_sp_birds)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site       FRic</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 171543.730</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 185612.548</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 112600.176</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500  66142.748</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000  20065.764</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500  18301.176</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000  17530.651</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500   3708.735</span></span></code></pre></div>
<p>Because the convex hull volume depends on the number and the units of
the traits used, it is difficult to compare across datasets, that is why
it has been suggested to standardize its value by the total volume
comprising all species in the dataset <span class="citation">(<a href="#ref-Villeger_New_2008" role="doc-biblioref">Villéger, Mason, and
Mouillot 2008</a>)</span>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds, <span class="at">stand =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site FRic</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1    1</span></span></code></pre></div>
<p>The newly computed FRic values will then be comprised between 0 and
1. It is especially useful when comparing different sites:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds, site_sp_birds, <span class="at">stand =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site       FRic</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 0.74271733</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 0.80362981</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 0.48751477</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 0.28637225</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000 0.08687692</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500 0.07923694</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000 0.07590087</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500 0.01605737</span></span></code></pre></div>
<p>Each row gives the standardized FRic values of each site.</p>
<p><strong>Parallelization</strong>. The computation of this function
can be parallelized thanks to the <code>future</code> package. Refer to
the <a href="./fundiversity_1-parallel.html">parallelization
vignette</a> to get more information about how to do so.</p>
<p><strong>Memoization</strong>. By default, when loading
<code>fundiversity</code>, the functions to compute convex hulls are <a href="https://en.wikipedia.org/wiki/Memoization">memoised</a> through
the <code>memoise</code> package if it is installed. It means that
repeated calls to <code>fd_fric()</code> with similar arguments won’t be
recomputed each time but recovered from memory. To deactivate this
behavior you can set the option <code>fundiversity.memoise</code> to
<code>FALSE</code> by running the following line:
<code>options(fundiversity.memoise = FALSE)</code>. If you use it
interactively it will only affect your current session. Add it to your
script(s) or <code>.Rprofile</code> file to avoid toggling it each
time.</p>
</div>
<div id="functional-volume-intersect-fric_intersect---fd_fric_intersect" class="section level1">
<h1>Functional volume intersect (FRic_intersect) -
<code>fd_fric_intersect()</code></h1>
<p>Sometimes you’re interested in the shared functional volumes between
pairs of sites more than in the functional volumes of each site
separately. fundiversity provides the <code>fd_fric_intersect()</code>
function for this exact use case.</p>
<p>It follows the same interface as <code>fd_fric()</code> with similar
named arguments:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric_intersect</span>(traits_birds)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   first_site second_site FRic_intersect</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         s1          s1       230967.7</span></span></code></pre></div>
<p><code>fd_fric_intersect()</code> computes the shared functional
volumes between each pair of sites, including self-intersection which
correspond to the functional volume of each site. Similarly to
<code>fd_fric()</code> if no site-species data is provided,
<code>fd_fric_intersect()</code> considers a site that contains all
species from the trait dataset.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric_intersect</span>(traits_birds, site_sp_birds[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,])</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   first_site second_site FRic_intersect</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   elev_250    elev_500       171532.6</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   elev_250    elev_250       171543.7</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   elev_500    elev_500       185612.5</span></span></code></pre></div>
<p>The output is a data.frame where the two first columns
(<code>first_site</code> and <code>second_site</code>) define the sites
on which the intersection is computed, the third column
(<code>FRic_intersect</code>) contains the volume of the
intersection.</p>
<p>Similarly to <code>fd_fric()</code> the intersections volumes can be
standardized:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric_intersect</span>(traits_birds, site_sp_birds[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,], <span class="at">stand =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   first_site second_site FRic_intersect</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   elev_250    elev_500      0.7426689</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   elev_250    elev_250      0.7427173</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   elev_500    elev_500      0.8036298</span></span></code></pre></div>
<p>Note that when standardizing the volumes, the behavior is similar to
that of <code>fd_fric()</code> which means the function considers the
total volume occupied by provided trait values, even if they are absent
from all sites, this can lead to standardized self-intersection volumes
lower than one.</p>
<p><strong>Parallelization</strong>. The computation of this function
can be parallelized thanks to the <code>future</code> package. Refer to
the <a href="./fundiversity_1-parallel.html">parallelization
vignette</a> to get more information about how to do so.</p>
<p><strong>Memoization</strong>. By default, when loading
<code>fundiversity</code>, the functions to compute convex hulls are <a href="https://en.wikipedia.org/wiki/Memoization">memoised</a> through
the <code>memoise</code> package if it is installed. It means that
repeated calls to <code>fd_fric_intersect()</code> with similar
arguments won’t be recomputed each time but recovered from memory. To
deactivate this behavior you can set the option
<code>fundiversity.memoise</code> to <code>FALSE</code> by running the
following line: <code>options(fundiversity.memoise = FALSE)</code>. If
you use it interactively it will only affect your current session. Add
it to your script(s) or <code>.Rprofile</code> file to avoid toggling it
each time.</p>
</div>
<div id="functional-divergence-fdiv---fd_fdiv" class="section level1">
<h1>Functional Divergence (FDiv) - <code>fd_fdiv()</code></h1>
<p>Functional Divergence (FDiv) represents how abundance is spread along
the different traits <span class="citation">(<a href="#ref-Villeger_New_2008" role="doc-biblioref">Villéger, Mason, and
Mouillot 2008</a>)</span>. When a species with extreme trait values has
the highest abundance, then functional divergence is high.</p>
<p>Use the <code>fd_fdiv()</code> function to compute functional
divergence:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One-dimension FDiv</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fdiv</span>(traits_birds[, <span class="dv">1</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>])</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site      FDiv</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 0.7490732</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple dimension FDiv</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fdiv</span>(traits_birds)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site      FDiv</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 0.7282172</span></span></code></pre></div>
<p>When no site-species matrix is provided, FDiv is computed by default
considering all the species together. If you provide a site-species
matrix, then FDiv is computed across all sites:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fdiv</span>(traits_birds, site_sp_birds)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site      FDiv</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 0.6847251</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 0.6937866</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 0.7056772</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 0.7269801</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000 0.7509511</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500 0.6985280</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000 0.6627204</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500 0.6422068</span></span></code></pre></div>
<p>Similarly to FRic, if the included species differ between the
site-species matrix and the trait dataset, <code>fd_fdiv()</code> will
take the common subset of species.</p>
<p>The computation of this function can be parallelized thanks to the
<code>future</code> package. Refer to the <a href="./fundiversity_1-parallel.html">parallelization vignette</a> to
get more information about how to do so.</p>
</div>
<div id="functional-evenness-feve---fd_feve" class="section level1">
<h1>Functional Evenness (FEve) - <code>fd_feve()</code></h1>
<p>Functional Evenness (FEve) describes the regularity of the
distribution of species (and their abundances) in trait space <span class="citation">(<a href="#ref-Villeger_New_2008" role="doc-biblioref">Villéger, Mason, and Mouillot 2008</a>)</span>.
FEve is bounded between 0 and 1. FEve is close to 0 when most species
(and abundances) are tightly packed in a portion of the trait space
while it is close to 1 if species are regularly spread (with even
abundances) along the trait space.</p>
<p>Use the <code>fd_fdiv()</code> function to compute functional
divergence:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One-dimension FEve</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_feve</span>(traits_birds[, <span class="dv">1</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>])</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site      FEve</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 0.4454885</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple dimension FEve</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_feve</span>(traits_birds)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site      FEve</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 0.3743341</span></span></code></pre></div>
<p>When no site-species matrix is provided, FEve is computed by default
considering all the species together. If you provide a site-species
matrix, then FEve is computed across all sites:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_feve</span>(traits_birds, site_sp_birds)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site      FEve</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 0.3841202</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 0.3846186</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 0.3426688</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 0.2965585</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000 0.3523994</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500 0.3552671</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000 0.3492529</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500 0.4222442</span></span></code></pre></div>
<p>Similarly to FRic, if the included species differ between the
site-species matrix and the trait dataset, <code>fd_feve()</code> will
take the common subset of species.</p>
<p>The computation of this function can be parallelized thanks to the
<code>future</code> package. Refer to the <a href="./fundiversity_1-parallel.html">parallelization vignette</a> to
get more information about how to do so.</p>
<p><strong>Memoization</strong>. By default, when loading
<code>fundiversity</code>, the functions to compute convex hulls are <a href="https://en.wikipedia.org/wiki/Memoization">memoised</a> through
the <code>memoise</code> package if it is installed. It means that
repeated calls to <code>fd_fdiv()</code> with similar arguments won’t be
entirely recomputed each time but recovered from memory. To deactivate
this behavior you can set the option <code>fundiversity.memoise</code>
to <code>FALSE</code> by running the following line:
<code>options(fundiversity.memoise = FALSE)</code>. If you use it
interactively it will only affect your current session. Add it to your
script(s) or <code>.Rprofile</code> file to avoid toggling it each
time.</p>
</div>
<div id="functional-dispersion-fdis---fd_fdis" class="section level1">
<h1>Functional Dispersion (FDis) - <code>fd_fdis()</code></h1>
<p>Functional Dispersion reflects changes in the abundance-weighted
deviation of species trait values from the center of the functional
space.</p>
<p>You can compute Functional Dispersion (FDis) using the
<code>fd_fdis()</code> function by providing a trait dataset:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fdis</span>(traits_birds)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site     FDis</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 133.3902</span></span></code></pre></div>
<p>If you don’t provide a site-species matrix, <code>fd_fdis()</code>
considers all species provided in the trait dataset present at equal
abundances in the same site. You can also provide a site-species matrix
to compute FDis at different sites:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fdis</span>(traits_birds, site_sp_birds)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site      FDis</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 151.38851</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 153.79982</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 161.57816</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 144.30915</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000  76.69386</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500  78.44577</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000  88.25201</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500  68.29563</span></span></code></pre></div>
<p>The computation of this function can be parallelized thanks to the
<code>future</code> package. Refer to the <a href="./fundiversity_1-parallel.html">parallelization vignette</a> to
get more information about how to do so.</p>
</div>
<div id="raos-quadratic-entropy-q---fd_raoq" class="section level1">
<h1>Rao’s Quadratic Entropy (Q) - <code>fd_raoq()</code></h1>
<p>Rao’s Quadratic entropy assesses the multi-dimensional divergence in
trait space <span class="citation">(<a href="#ref-Rao_Diversity_1982" role="doc-biblioref">Rao 1982</a>)</span>. It is the abundance-weighted
variance of the trait dissimilarities between all species pairs.</p>
<p>You can compute Rao’s Quadratic entropy (Q) using the
<code>fd_raoq()</code> function by providing a trait dataset:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_raoq</span>(traits_birds)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site        Q</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 170.0519</span></span></code></pre></div>
<p>If you don’t provide a site-species matrix, <code>fd_raoq()</code>
considers all species provided in the trait dataset present at equal
abundances in the same site. You can also provide a site-species matrix
to compute Q at different sites:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_raoq</span>(traits_birds, site_sp_birds)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site         Q</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 194.78095</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 197.08184</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 200.52231</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 178.24801</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000  97.32416</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500 102.22461</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000 113.22049</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500  87.04750</span></span></code></pre></div>
<p>Because the computation of Rao’s quadratic entropy requires
dissimilarities between all pair of species in the dataset, if you
provide a trait dataset <code>fd_raoq()</code>, the function will
compute the Euclidean distance between all pairs of species. If you wish
to directly provide species dissimilarities, you can do so through the
<code>dist_matrix</code> argument:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute dissimilarity between species with the Manhattan distance</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>trait_dissim <span class="ot">&lt;-</span> <span class="fu">dist</span>(traits_birds, <span class="at">method =</span> <span class="st">&quot;manhattan&quot;</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_raoq</span>(<span class="at">dist_matrix =</span> trait_dissim)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site       Q</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 190.589</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_raoq</span>(<span class="at">sp_com =</span> site_sp_birds, <span class="at">dist_matrix =</span> <span class="fu">as.matrix</span>(trait_dissim))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site        Q</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 218.3636</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 220.8257</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 220.0048</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 196.6785</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000 112.6211</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500 117.6497</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000 127.5911</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500 104.8981</span></span></code></pre></div>
<p>NB: if you want to provide both a site-species matrix and a trait
dissimilarity matrix please specify explicitly the arguments names.</p>
</div>
<div id="large-site-species-data-sparse-matrices" class="section level1">
<h1>Large site-species data / sparse matrices</h1>
<p><a href="https://en.wikipedia.org/wiki/Sparse_matrix">Sparse
matrices</a> are memory efficient ways of storing matrix object that
contains many zeros. <code>fundiversity</code> is fully compatible with
sparse matrices through the <a href="https://cran.r-project.org/package=Matrix"><code>Matrix</code>
package</a>. They can be used to encode site-species information or
distance matrices.</p>
<p>Provide <code>Matrix</code> objects as inputs of the indices function
<code>fundiversity</code>, they will transparently use them for
efficient computation.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert site-species matrix to sparse matrix</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>sparse_site_sp <span class="ot">&lt;-</span> Matrix<span class="sc">::</span><span class="fu">Matrix</span>(site_sp_birds, <span class="at">sparse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_raoq</span>(traits_birds, site_sp_birds)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        site         Q</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  elev_250 194.78095</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  elev_500 197.08184</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 elev_1000 200.52231</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 elev_1500 178.24801</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 elev_2000  97.32416</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 elev_2500 102.22461</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 elev_3000 113.22049</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 elev_3500  87.04750</span></span></code></pre></div>
</div>
<div id="standardizing-trait-data" class="section level1">
<h1>Standardizing trait data</h1>
<p><code>fundiversity</code> does not perform any transformation on the
input trait or dissimilarity data. In <code>fd_raoq()</code> if you
provide only continuous trait data then the function will attempt
computing Euclidean distance between the species.</p>
<p>In order to get comparable functional diversity indices you can
standardize the trait data. One option would be to consider the
<code>scale()</code> function to scale each continuous trait with a mean
of zero and a standard deviation of one (z-score). Each trait will then
have the same importance when computing functional diversity
indices:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>traits_birds_sc <span class="ot">&lt;-</span> <span class="fu">scale</span>(traits_birds)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(traits_birds_sc)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Bill.width..mm.   Bill.length..mm.    Kipp.s.index      Bodymass..g.     </span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Min.   :-1.1854   Min.   :-0.78608   Min.   :-1.8545   Min.   :-0.49301  </span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1st Qu.:-0.7330   1st Qu.:-0.52857   1st Qu.:-0.7432   1st Qu.:-0.44701  </span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Median :-0.2974   Median :-0.28257   Median :-0.2492   Median :-0.34440  </span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Mean   : 0.0000   Mean   : 0.00000   Mean   : 0.0000   Mean   : 0.00000  </span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3rd Qu.: 0.4157   3rd Qu.: 0.09482   3rd Qu.: 0.3682   3rd Qu.:-0.03999  </span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Max.   : 3.9738   Max.   : 7.20531   Max.   : 3.3317   Max.   : 5.79396</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Unscaled</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site     FRic</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 230967.7</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Scaled</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="fu">fd_fric</span>(traits_birds_sc)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   site    FRic</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   s1 88.9286</span></span></code></pre></div>
<p>Another solution to make trait comparable is to scale them between 0
and 1 by scaling each trait by its maximum and minimum values:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>min_values <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">lapply</span>(<span class="fu">as.data.frame</span>(traits_birds), min))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>max_values <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">lapply</span>(<span class="fu">as.data.frame</span>(traits_birds), max))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>traits_birds_minmax <span class="ot">&lt;-</span> <span class="fu">apply</span>(traits_birds, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> min_values)<span class="sc">/</span>(max_values <span class="sc">-</span> min_values)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>traits_birds_minmax <span class="ot">&lt;-</span> <span class="fu">t</span>(traits_birds_minmax)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(traits_birds_minmax)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Bill.width..mm.   Bill.length..mm.   Kipp.s.index     Bodymass..g.     </span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Min.   :0.00000   Min.   :0.00000   Min.   :0.0000   Min.   :0.000000  </span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1st Qu.:0.08769   1st Qu.:0.03222   1st Qu.:0.2143   1st Qu.:0.007317  </span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Median :0.17212   Median :0.06301   Median :0.3095   Median :0.023637  </span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Mean   :0.22977   Mean   :0.09837   Mean   :0.3576   Mean   :0.078418  </span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3rd Qu.:0.31034   3rd Qu.:0.11023   3rd Qu.:0.4286   3rd Qu.:0.072057  </span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Max.   :1.00000   Max.   :1.00000   Max.   :1.0000   Max.   :1.000000</span></span></code></pre></div>
<p>There are several other options available to standardize trait
values, reviewed in <span class="citation">Leps et al. (<a href="#ref-Leps_Quantifying_2006" role="doc-biblioref">2006</a>)</span>.</p>
<p>If not all the traits you use are continuous, refer to the next
section, which suggests ways of computing functional diversity indices
with non-continuous traits.</p>
</div>
<div id="non-continuous-traits" class="section level1">
<h1>Non-continuous traits?</h1>
<p>Do not panic. You can still compute the above-mentioned functional
diversity indices. However, as all indices need continuous descriptors
for all considered species, you need to transform the non-continuous
trait data into a continuous form. The general idea is to obtain from
the trait table a table of quantitative descriptions by defining
specific dissimilarity and projecting species dissimilarities onto
quantitative space using Principal Coordinates Analysis (PCoA). The
framework is fully described in <span class="citation">Maire et al. (<a href="#ref-Maire_How_2015" role="doc-biblioref">2015</a>)</span>.</p>
<p>To compute dissimilarity with non-continuous traits you can user
Gower’s distance <span class="citation">(<a href="#ref-Gower_general_1971" role="doc-biblioref">Gower
1971</a>)</span> or its following adaptations <span class="citation">(<a href="#ref-Pavoine_challenge_2009" role="doc-biblioref">Pavoine et al.
2009</a>; <a href="#ref-Podani_Extending_1999" role="doc-biblioref">Podani 1999</a>)</span>. You can use the following
functions: <code>cluster::daisy()</code>, <code>FD::gowdis()</code>,
<code>ade4::dist.ktab()</code>, or <code>vegan::vegdist()</code>.</p>
<p>Then you can project these dissimilarities with Principal Coordinates
using <code>ape::pcoa()</code> for example. You can then select the
first dimensions that explains the most variance and use theses as the
input “traits” to compute functional diversity indices.</p>
</div>
<div id="missing-values-in-traits" class="section level1">
<h1>Missing values in traits?</h1>
<p>Sometimes, some of the trait values can be missing for some species
in your dataset. Because <code>fundiversity</code> does not want to make
assumptions without telling you, by default it <strong>drops</strong>
the species data for which the trait is missing.</p>
<p>If you want to use data with missing values you can use dissimilarity
metrics that accept missing trait values such as some of the methods
specified in <code>vegan::vegdist()</code>.</p>
<p>Another solution, would be to impute the missing trait value to fill
it. Many imputation methods exists and trait imputation is out of the
scope of <code>fundiversity</code> but you can find some details on how
to proceed in the review by <span class="citation">Penone et al. (<a href="#ref-Penone_Imputation_2014" role="doc-biblioref">2014</a>)</span>.</p>
</div>
<div id="functions-summary-table" class="section level1">
<h1>Functions summary table</h1>
<table>
<colgroup>
<col width="30%" />
<col width="21%" />
<col width="26%" />
<col width="21%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function Name</th>
<th align="left">Index Name</th>
<th align="center">Parallelizable<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></th>
<th align="center">Memoizable<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>fd_fric()</code></td>
<td align="left">FRic</td>
<td align="center">✅</td>
<td align="center">✅</td>
</tr>
<tr class="even">
<td align="left"><code>fd_fric_intersect()</code></td>
<td align="left">FRic_intersect</td>
<td align="center">✅</td>
<td align="center">✅</td>
</tr>
<tr class="odd">
<td align="left"><code>fd_fdiv()</code></td>
<td align="left">FDiv</td>
<td align="center">✅</td>
<td align="center">✅</td>
</tr>
<tr class="even">
<td align="left"><code>fd_feve()</code></td>
<td align="left">FEve</td>
<td align="center">✅</td>
<td align="center">❌</td>
</tr>
<tr class="odd">
<td align="left"><code>fd_fdis()</code></td>
<td align="left">FDis</td>
<td align="center">✅</td>
<td align="center">❌</td>
</tr>
<tr class="even">
<td align="left"><code>fd_raoq()</code></td>
<td align="left">Rao’s Q</td>
<td align="center">❌</td>
<td align="center">❌</td>
</tr>
</tbody>
</table>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Gower_general_1971" class="csl-entry">
Gower, John C. 1971. <span>“A General Coefficient of Similarity and Some
of Its Properties.”</span> <em>Biometrics</em>, 857–71.
</div>
<div id="ref-Leps_Quantifying_2006" class="csl-entry">
Leps, Jan, Francesco Bello, Sandra Lavorel, and Sandra Berman. 2006.
<span>“Quantifying and Interpreting Functional Diversity of Natural
Communities: <span>Practical</span> Considerations Matter.”</span>
<em>Preslia</em> 78 (November): 481–501.
</div>
<div id="ref-Maire_How_2015" class="csl-entry">
Maire, Eva, Gaël Grenouillet, Sébastien Brosse, and Sébastien Villéger.
2015. <span>“How Many Dimensions Are Needed to Accurately Assess
Functional Diversity? <span>A</span> Pragmatic Approach for Assessing
the Quality of Functional Spaces.”</span> <em>Global Ecology and
Biogeography</em> 24 (6): 728–40. <a href="https://doi.org/10.1111/geb.12299">https://doi.org/10.1111/geb.12299</a>.
</div>
<div id="ref-Nowak_Data_2019" class="csl-entry">
Nowak, Larissa, W. Daniel Kissling, Irene M. A. Bender, D. Matthias
Dehling, Till Töpfer, Katrin Böhning-Gaese, and Matthias Schleuning.
2019a. <span>“Data from: <span>Projecting</span> Consequences of Global
Warming for the Functional Diversity of Fleshy-Fruited Plants and
Frugivorous Birds Along a Tropical Elevational Gradient.”</span>
<em>Data Dryad Digital Repository</em>. <a href="https://doi.org/10.5061/DRYAD.C0N737B">https://doi.org/10.5061/DRYAD.C0N737B</a>.
</div>
<div id="ref-Nowak_Projecting_2019" class="csl-entry">
———. 2019b. <span>“Projecting Consequences of Global Warming for the
Functional Diversity of Fleshy-Fruited Plants and Frugivorous Birds
Along a Tropical Elevational Gradient.”</span> Edited by Kenneth Feeley.
<em>Diversity and Distributions</em> 25 (9): 1362–74. <a href="https://doi.org/10.1111/ddi.12946">https://doi.org/10.1111/ddi.12946</a>.
</div>
<div id="ref-Pavoine_challenge_2009" class="csl-entry">
Pavoine, Sandrine, Jeanne Vallet, Anne-Béatrice Dufour, Sophie Gachet,
and Hervé Daniel. 2009. <span>“On the Challenge of Treating Various
Types of Variables: Application for Improving the Measurement of
Functional Diversity.”</span> <em>Oikos</em> 118 (3): 391–402. <a href="https://doi.org/10.1111/j.1600-0706.2008.16668.x">https://doi.org/10.1111/j.1600-0706.2008.16668.x</a>.
</div>
<div id="ref-Penone_Imputation_2014" class="csl-entry">
Penone, Caterina, Ana D. Davidson, Kevin T. Shoemaker, Moreno Di Marco,
Carlo Rondinini, Thomas M. Brooks, Bruce E. Young, Catherine H. Graham,
and Gabriel C. Costa. 2014. <span>“Imputation of Missing Data in
Life-History Trait Datasets: Which Approach Performs the Best?”</span>
<em>Methods in Ecology and Evolution</em> 5 (9): 961–70. <a href="https://doi.org/10.1111/2041-210X.12232">https://doi.org/10.1111/2041-210X.12232</a>.
</div>
<div id="ref-Podani_Extending_1999" class="csl-entry">
Podani, János. 1999. <span>“Extending <span>Gower</span>’s General
Coefficient of Similarity to Ordinal Characters.”</span> <em>Taxon</em>,
331–40.
</div>
<div id="ref-Rao_Diversity_1982" class="csl-entry">
Rao, C. Radhakrishna. 1982. <span>“Diversity and Dissimilarity
Coefficients: <span>A</span> Unified Approach.”</span> <em>Theoretical
Population Biology</em> 21 (1): 24–43. <a href="https://doi.org/10.1016/0040-5809(82)90004-1">https://doi.org/10.1016/0040-5809(82)90004-1</a>.
</div>
<div id="ref-Villeger_New_2008" class="csl-entry">
Villéger, Sébastien, Norman W. H. Mason, and David Mouillot. 2008.
<span>“New <span>Multidimensional Functional Diversity Indices</span>
for a <span>Multifaceted Framework</span> in <span>Functional
Ecology</span>.”</span> <em>Ecology</em> 89 (8): 2290–2301. <a href="https://doi.org/10.1890/07-1206.1">https://doi.org/10.1890/07-1206.1</a>.
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>parallelization through the <code>future</code> backend
please refer to the <a href="https://funecology.github.io/fundiversity/articles/fundiversity_1-parallel.html">parallelization
vignette</a> for details.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>memoization means that the results of the functions
calls are cached and not recomputed when recalled, to toggle it off see
the <code>fundiversity::fd_fric()</code> <a href="https://funecology.github.io/fundiversity/reference/fd_fric.html#details">Details
section</a>.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
